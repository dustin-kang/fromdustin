{% extends 'blogs/base.html' %}

{% block head_title %}
  {{ post.title }} - Dongwoo Kang
{% endblock %}

  <!-- 스태프 버튼 -->


{% block main_area %}
    <!-- 주제 -->
    <main class="px-3" style="text-align: left;">
      <!-- Title -->
      <br>
      <hr>
      <span class="text-muted" style="font-size:10px">
        {{ post.category }}
        <!-- TAG -->
      </span>
      <h1 class="card-title mb-1"><strong>{{ post.title }}</strong></h1>
      <p class="card-text"><small class="text-muted">{{ post.created_at }}</small></p>
      {% if post.head_image %}
        <img class= "img-fluid rounded" src="{{ post.head_image.url }}" alt=" {{ post.title }} head_image">
      {% else %}
        {% comment %} <img class= "img-fluid rounded mb-5" src="http://picsum.photos/seed/{{ post.id }}/606/300" alt=" random_image"> {% endcomment %}
      {% endif %}
      <br>
      <!-- POST-->
        <div>
          <p class="card-text">{{ post.get_content_markdown | safe }}</p>
          <hr>
          {% if post.tags.exists %}
          {% for tag in post.tags.all %}
            <a href="{{ tag.get_absolute_url }}" class="badge rounded-pill text-bg-light" style="text-decoration:none">{{ tag }}</a>
          {% endfor %}
          {% endif %}
        </div>
      {% if user.is_authenticated and user == post.author %}
        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
          <a class="btn btn-light" href="/blog/update_post/{{ post.pk }}/" role="button"><i class="fas fa-pen" ></i></a>
        </div><br>
      {% endif %} 

    
      <!-- Comment -->
      {% if post.comment_set.exists %}
        {% for comment in post.comment_set.iterator %}
           <div class="media mb-4" id="comment-{{ comment.pk }}">
              <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50" alt="">
              <div class="media-body">
                <h5 class="mt-0">
                  {{ comment.author.username }} &nbsp;&nbsp;<small class="text-muted">{{ comment.created_at }}</small>
                </h5>
                <p>{{ comment.content | linebreaks }}</p>
              </div>
           </div>
        {% endfor %}
      {% endif %}
    </main>
{% endblock %}